import fs from 'fs';

const FILES = ['./src/pixel-engine.js', './src/pixel-engine-static.js'];

// 現在のLv5は5体 (paladin, sage, angel, beast, dragon)
// 新規に追加するLv5: 5体
const NEW_LV5 = [
    {
        id: 'lv5_samurai', name: 'けんごうサムライ', level: 5, type: 'physical', baseId: 'kid_brave', crown: true,
        palette: "[null, '#475569', '#334155', '#000', '#fff', '#fcd34d', '#dc2626', '#94a3b8', '#0f172a']",
        data: `[
            [0, 0, 0, 0, 0, 0, 8, 8, 8, 0, 0, 0, 0, 0, 0, 0], // 8=黒髪マゲ
            [0, 0, 0, 0, 0, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0], // 1=メイン灰白
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 3, 3, 1, 3, 3, 1, 8, 0, 0, 0, 0], // 3=目(黒)
            [0, 0, 0, 8, 1, 3, 4, 1, 3, 4, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 3, 3, 3, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0], // 2=濃灰の鎧/袴
            [0, 0, 8, 2, 2, 5, 2, 2, 2, 5, 2, 2, 8, 0, 0, 0], // 5=金の装飾
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 7, 7, 0], // 7=銀(刀)
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 7, 4, 0],
            [0, 0, 0, 8, 8, 2, 2, 2, 2, 2, 8, 8, 8, 7, 7, 0],
            [0, 0, 0, 0, 8, 2, 8, 0, 8, 2, 8, 0, 8, 5, 8, 0], // 5=鍔
            [0, 0, 0, 0, 8, 8, 0, 0, 0, 8, 8, 0, 0, 8, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv5_ninja', name: 'シノビマスター', level: 5, type: 'physical', baseId: 'kid_brave', crown: true,
        palette: "[null, '#1e293b', '#0f172a', '#000', '#fff', '#ef4444', '#b91c1c', '#94a3b8', '#334155']",
        data: `[
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0], // 1=濃紺(黒装束)
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 4, 1, 1, 1, 1, 1, 4, 8, 0, 0, 0, 0], // 4=目出し帽の白肌
            [0, 0, 0, 8, 4, 3, 3, 4, 3, 3, 4, 8, 0, 0, 0, 0], // 3=黒目
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 8, 7, 7, 7, 1, 1, 1, 7, 7, 7, 8, 0, 0, 0], // 7=手裏剣/クナイ(銀)
            [0, 0, 8, 7, 4, 7, 1, 1, 1, 7, 4, 7, 8, 0, 0, 0],
            [0, 0, 8, 1, 1, 1, 5, 5, 5, 1, 1, 1, 8, 0, 0, 0], // 5=赤帯
            [0, 0, 8, 1, 1, 1, 5, 6, 5, 1, 1, 1, 8, 0, 0, 0], // 6=濃赤
            [0, 0, 0, 8, 8, 1, 1, 1, 1, 1, 8, 8, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 8, 8, 0, 8, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv5_alchemist', name: 'マッドれんきん', level: 5, type: 'intellectual', baseId: 'kid_smart', crown: true,
        palette: "[null, '#818cf8', '#e0e7ff', '#000', '#fff', '#22c55e', '#ef4444', '#facc15', '#1e3a8a']",
        data: `[
            [0, 0, 0, 0, 0, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0], // ゴーグル付き
            [0, 0, 0, 0, 8, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0], // 1=メイン青
            [0, 0, 0, 8, 7, 7, 7, 1, 7, 7, 7, 8, 0, 0, 0, 0], // 7=金フチ
            [0, 0, 0, 8, 7, 6, 6, 1, 7, 5, 5, 8, 0, 0, 0, 0], // 6=赤レンズ, 5=緑レンズ
            [0, 0, 0, 8, 7, 7, 7, 1, 7, 7, 7, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 2, 2, 2, 2, 2, 1, 8, 0, 0, 0, 0], // 2=白衣
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0],
            [0, 0, 8, 2, 8, 8, 2, 2, 2, 8, 8, 2, 8, 0, 0, 0], // 手にフラスコ
            [0, 8, 4, 8, 5, 5, 8, 2, 8, 6, 6, 8, 4, 8, 0, 0], // 4=白反射
            [0, 8, 5, 5, 5, 5, 8, 2, 8, 6, 6, 6, 6, 8, 0, 0], // 緑と赤の液体
            [0, 0, 8, 8, 8, 8, 8, 2, 8, 8, 8, 8, 8, 0, 0, 0],
            [0, 0, 0, 8, 8, 2, 2, 2, 2, 2, 8, 8, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 8, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv5_dancer', name: 'かがやきステップ', level: 5, type: 'social', baseId: 'kid_kind', crown: true,
        palette: "[null, '#f472b6', '#db2777', '#000', '#fff', '#fcd34d', '#f8fafc', '#ec4899', '#be185d']",
        data: `[
            [0, 0, 0, 0, 0, 5, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0], // 5=金の髪飾り
            [0, 0, 0, 0, 8, 5, 5, 5, 5, 5, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0], // 1=メインピンク顔
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 3, 3, 1, 3, 3, 1, 8, 0, 0, 0, 0], // 3=ウィンク笑顔
            [0, 0, 0, 8, 1, 3, 4, 1, 3, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 7, 7, 7, 7, 7, 1, 8, 0, 0, 0, 0], // 7=濃ピンクドレス
            [0, 0, 8, 1, 1, 7, 7, 5, 7, 7, 1, 1, 8, 0, 0, 0],
            [0, 8, 2, 1, 1, 7, 7, 7, 7, 7, 1, 1, 2, 8, 0, 0], // 2=両手にリボン
            [0, 8, 2, 2, 2, 7, 7, 7, 7, 7, 2, 2, 2, 8, 0, 0],
            [0, 8, 8, 8, 8, 6, 6, 6, 6, 6, 8, 8, 8, 8, 0, 0], // 6=白フリル
            [0, 0, 0, 0, 8, 7, 7, 7, 7, 7, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 8, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0], // 踊る足
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv5_jester', name: 'クレージーピエロ', level: 5, type: 'chaotic', baseId: 'kid_chaos', crown: true,
        palette: "[null, '#a855f7', '#7e22ce', '#000', '#fff', '#ef4444', '#facc15', '#c084fc', '#1e1b4b']",
        data: `[
            [0, 0, 0, 8, 8, 0, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0], // 8=黒, 道化師の帽子
            [0, 0, 8, 5, 5, 8, 0, 0, 8, 6, 6, 8, 0, 0, 0, 0], // 5=赤, 6=黄(左右非対称)
            [0, 0, 8, 5, 5, 8, 8, 8, 8, 6, 6, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0], // 1=メイン紫
            [0, 0, 0, 8, 4, 4, 1, 1, 4, 4, 8, 0, 0, 0, 0, 0], // 4=白塗り仮面風
            [0, 0, 0, 8, 4, 3, 1, 1, 3, 4, 8, 0, 0, 0, 0, 0], // 3=黒(虚無の目)
            [0, 0, 0, 8, 4, 4, 1, 1, 4, 4, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 5, 5, 1, 1, 8, 0, 0, 0, 0, 0], // 5=赤いニヤリ口
            [0, 0, 8, 2, 2, 1, 1, 1, 1, 2, 2, 8, 0, 0, 0, 0], // 2=濃紫の服
            [0, 0, 8, 2, 2, 6, 2, 2, 6, 2, 2, 8, 0, 0, 0, 0], // 6=ポンポン
            [0, 8, 7, 8, 2, 2, 2, 2, 2, 2, 8, 7, 8, 0, 0, 0], // 7=短剣(銀/薄紫など)
            [0, 8, 7, 8, 2, 2, 2, 2, 2, 2, 8, 7, 8, 0, 0, 0],
            [0, 0, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 5, 8, 0, 8, 6, 8, 0, 0, 0, 0, 0], // 足も非対称
            [0, 0, 0, 0, 8, 8, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    }
];

// 現在のLv6は4体 (titan, oracle, fairy, phantom)
// 新規に追加するLv6: 6体
const NEW_LV6 = [
    {
        id: 'lv6_golem', name: 'くろがねゴーレム', level: 6, type: 'physical', baseId: 'kid_brave', crown: true,
        palette: "[null, '#64748b', '#334155', '#000', '#fff', '#fef08a', '#eab308', '#94a3b8', '#0f172a']",
        data: `[
            [0, 0, 0, 0, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0], // 巨大な鉄
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0], // 1=メイン鉄(灰)
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 5, 5, 1, 5, 5, 8, 0, 0, 0, 0, 0], // 5=黄色い光る目
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0],
            [0, 8, 8, 8, 2, 2, 2, 2, 2, 2, 8, 8, 8, 0, 0, 0], // 2=濃灰(巨大な肩幅)
            [8, 1, 1, 8, 2, 2, 2, 2, 2, 2, 8, 1, 1, 8, 0, 0],
            [8, 1, 1, 8, 2, 2, 5, 5, 2, 2, 8, 1, 1, 8, 0, 0], // コア
            [8, 1, 1, 8, 2, 2, 2, 2, 2, 2, 8, 1, 1, 8, 0, 0],
            [0, 8, 8, 8, 2, 2, 2, 2, 2, 2, 8, 8, 8, 0, 0, 0],
            [0, 0, 0, 8, 8, 1, 1, 1, 1, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 2, 2, 8, 8, 2, 2, 8, 0, 0, 0, 0, 0], // ゴツい足
            [0, 0, 0, 8, 2, 2, 8, 8, 2, 2, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 8, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv6_sylph', name: 'かぜのシルフ', level: 6, type: 'intellectual', baseId: 'kid_smart', crown: true,
        palette: "[null, '#a7f3d0', '#4ade80', '#000', '#fff', '#e0f2fe', '#38bdf8', '#166534', '#0f766e']",
        data: `[
            [0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0], // 5=薄い水色風
            [0, 0, 0, 0, 5, 1, 1, 1, 5, 0, 0, 0, 0, 0, 0, 0], // 1=メイン薄緑色
            [0, 0, 0, 5, 1, 1, 1, 1, 1, 5, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 5, 1, 3, 3, 1, 3, 3, 5, 0, 0, 0, 0, 0], // 3=瞳
            [0, 0, 0, 5, 1, 3, 4, 1, 3, 4, 5, 0, 0, 0, 0, 0], // 4=白
            [0, 0, 0, 5, 1, 1, 1, 1, 1, 1, 5, 0, 0, 0, 0, 0],
            [0, 0, 5, 6, 2, 2, 2, 2, 2, 2, 6, 5, 0, 0, 0, 0], // 2=濃緑ドレス, 6=青い風のエフェクト
            [0, 5, 6, 6, 2, 2, 2, 2, 2, 2, 6, 6, 5, 0, 0, 0],
            [5, 6, 6, 0, 2, 2, 2, 2, 2, 2, 0, 6, 6, 5, 0, 0],
            [5, 6, 0, 0, 2, 2, 2, 2, 2, 2, 0, 0, 6, 5, 0, 0],
            [5, 0, 0, 0, 8, 8, 8, 8, 8, 8, 0, 0, 0, 5, 0, 0], // 浮遊
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv6_dryad', name: 'もりのドライアド', level: 6, type: 'social', baseId: 'kid_kind', crown: true,
        palette: "[null, '#4ade80', '#166534', '#000', '#fff', '#f472b6', '#a3e635', '#14532d', '#831843']",
        data: `[
            [0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0], // 5=ピンクの花冠
            [0, 0, 0, 0, 8, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0], // 2=濃緑(髪)
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0, 0], // 1=薄緑顔
            [0, 0, 0, 8, 1, 3, 3, 1, 3, 3, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 3, 4, 1, 3, 4, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 2, 1, 5, 5, 1, 2, 8, 0, 0, 0, 0, 0], // 5=ほっぺ
            [0, 0, 0, 8, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0],
            [0, 0, 8, 6, 2, 2, 2, 2, 2, 2, 6, 8, 0, 0, 0, 0], // 6=黄緑の葉っぱの服
            [0, 0, 8, 6, 6, 6, 6, 6, 6, 6, 6, 8, 0, 0, 0, 0],
            [0, 0, 8, 6, 6, 6, 6, 6, 6, 6, 6, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 8, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 7, 8, 0, 8, 7, 8, 0, 0, 0, 0, 0], // 7=木の幹の足
            [0, 0, 0, 0, 8, 8, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv6_ifrit', name: 'もえさかるイフリート', level: 6, type: 'creative', baseId: 'kid_active', crown: true,
        palette: "[null, '#ef4444', '#b91c1c', '#000', '#fff', '#facc15', '#f97316', '#7f1d1d', '#450a0a']",
        data: `[
            [0, 0, 0, 0, 0, 5, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0], // 5=黄(炎の先端)
            [0, 0, 0, 0, 5, 6, 5, 6, 5, 0, 0, 0, 0, 0, 0, 0], // 6=オレンジ
            [0, 0, 0, 5, 6, 1, 1, 1, 6, 5, 0, 0, 0, 0, 0, 0], // 1=メイン赤
            [0, 0, 0, 5, 1, 1, 1, 1, 1, 5, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 3, 3, 1, 3, 3, 8, 0, 0, 0, 0, 0], // 3=黒(怒りの目)
            [0, 0, 0, 8, 1, 3, 4, 1, 3, 4, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0],
            [0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0], // 怒った口(4=白キバ)
            [0, 8, 2, 2, 1, 4, 4, 4, 4, 1, 2, 2, 8, 0, 0, 0], // 2=濃赤の筋肉質な身体
            [0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0],
            [8, 1, 1, 8, 2, 2, 2, 2, 2, 2, 8, 1, 1, 8, 0, 0], // 燃えるような腕
            [8, 5, 5, 8, 8, 8, 8, 8, 8, 8, 8, 5, 5, 8, 0, 0],
            [0, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 0, 0, 0], // 浮遊しているランプの精的な
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv6_undine', name: 'すいりゅうウンディーネ', level: 6, type: 'creative', baseId: 'kid_active', crown: true,
        palette: "[null, '#38bdf8', '#0ea5e9', '#000', '#fff', '#e0f2fe', '#bae6fd', '#0284c7', '#0c4a6e']",
        data: `[
            [0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0], // 5=薄い水色
            [0, 0, 0, 0, 5, 1, 1, 1, 5, 0, 0, 0, 0, 0, 0, 0], // 1=メイン水色
            [0, 0, 0, 5, 1, 1, 1, 1, 1, 5, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 3, 3, 1, 3, 3, 8, 0, 0, 0, 0, 0], // 穏やかな目
            [0, 0, 0, 8, 1, 3, 4, 1, 3, 4, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 4, 4, 1, 1, 8, 0, 0, 0, 0, 0], // にっこり
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0], // 2=濃青ドレス
            [0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0],
            [0, 8, 5, 5, 2, 2, 2, 2, 2, 2, 5, 5, 8, 0, 0, 0], // 水のエフェクト袖
            [0, 8, 5, 5, 2, 2, 2, 2, 2, 2, 5, 5, 8, 0, 0, 0],
            [0, 0, 8, 8, 2, 2, 2, 2, 2, 2, 8, 8, 0, 0, 0, 0],
            [0, 0, 0, 0, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0], // 尾びれ的に
            [0, 0, 0, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    },
    {
        id: 'lv6_wraith', name: 'オンネンのレイス', level: 6, type: 'chaotic', baseId: 'kid_chaos', crown: true,
        palette: "[null, '#a855f7', '#7e22ce', '#000', '#fff', '#d8b4fe', '#fef08a', '#4c1d95', '#312e81']",
        data: `[
            [0, 0, 0, 0, 0, 0, 8, 8, 8, 0, 0, 0, 0, 0, 0, 0], // 8=黒
            [0, 0, 0, 0, 0, 8, 1, 1, 1, 8, 0, 0, 0, 0, 0, 0], // 1=メイン紫
            [0, 0, 0, 0, 8, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 6, 6, 1, 6, 6, 1, 8, 0, 0, 0, 0], // 6=不気味な黄色の目
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 0, 8, 1, 1, 2, 2, 2, 1, 1, 8, 0, 0, 0, 0], // 2=濃紫の口
            [0, 0, 0, 8, 1, 1, 1, 1, 1, 1, 1, 8, 0, 0, 0, 0],
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0], // 破れた布
            [0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0],
            [0, 0, 8, 2, 8, 2, 8, 2, 8, 2, 8, 2, 8, 0, 0, 0], // ボロボロの裾
            [0, 0, 0, 8, 0, 8, 0, 8, 0, 8, 0, 8, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]`
    }
];

const ADD_MONSTERS = [...NEW_LV5, ...NEW_LV6];

function addMonsters(source) {
    const insertIndex = source.indexOf('export function getMonsterSpec');
    if (insertIndex === -1) return source;
    const lastBracketIndex = source.lastIndexOf(']', insertIndex);
    // source [lastBracketIndex] is actually ']' of '];'

    let addedString = '';
    for (const monster of ADD_MONSTERS) {
        addedString += `    {
        id: '${monster.id}', name: '${monster.name}', level: ${monster.level}, type: '${monster.type}', baseId: '${monster.baseId}', crown: ${monster.crown},
        palette: ${monster.palette},
        data: ${monster.data}
    },\n`;
    }

    // もともと最後のエントリの後は '}' なので、カンマを追加する
    // lastBracketIndexは ']' を指す。その前は '}' なので
    // lastBracketIndexの直前にコンマを追加する必要はない（実はある？）
    // 置換の代わりに単純に `];` の直前文字列を切り取ってくっつける。
    return source.substring(0, lastBracketIndex) + addedString + source.substring(lastBracketIndex);
}

FILES.forEach(file => {
    if (fs.existsSync(file)) {
        let src = fs.readFileSync(file, 'utf8');
        let updated = addMonsters(src);
        fs.writeFileSync(file, updated, 'utf8');
        console.log(`Added Lv5, Lv6 new monsters to ${file}`);
    }
});
