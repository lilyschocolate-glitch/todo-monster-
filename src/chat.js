/**
 * AI会話 — Gemini APIでキャラ同士の個性的な会話を生成
 * 5系統×8パターン（40モック）+ 時間帯対応プロンプト
 */

const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';

/** NPCキャラクターの固定設定 */
const NPC_CHARACTER = {
    name: 'グレモチ',
    personalitySummary: 'のんびり屋で好奇心旺盛。ちょっと天然',
    recentTasks: ['お昼寝した', 'おやつ食べた', 'お散歩した'],
};

/** 性格値から口調パターンを決定 */
function getToneStyle(personality) {
    if (!personality) return 'ゆるくてのんきな話し方';

    const sorted = Object.entries(personality)
        .sort(([, a], [, b]) => b - a)
        .filter(([, v]) => v > 0);

    if (sorted.length === 0) return 'ゆるくてのんきな話し方';

    const dominant = sorted[0][0];
    const toneMap = {
        creative: '夢見がちでふわふわした話し方。「〜かも」「〜って素敵」が口癖。色や音の表現を使う',
        physical: '元気でテンション高め。「よっしゃ！」「いっちょやるか！」が口癖。体の感覚で物事を表現',
        social: '人懐っこくておしゃべり好き。「ねえねえ」「〜だよね！」が口癖。相手のことをよく聞く',
        intellectual: '落ち着いていて少し大人びた話し方。「なるほど」「興味深い」が口癖。理由や仕組みを語りたがる',
        chaotic: '自由奔放でつかみどころがない。「なんかさ〜」「あはは！」が口癖。話題が飛ぶ',
    };

    let tone = toneMap[dominant] || 'ゆるい話し方';

    if (sorted.length >= 2) {
        const sub = sorted[1][0];
        const subHints = {
            creative: 'たまに想像力豊かなことを言う',
            physical: 'たまに体を動かしたがる',
            social: 'たまに相手を気遣う',
            intellectual: 'たまに豆知識を挟む',
            chaotic: 'たまに突拍子もないことを言う',
        };
        tone += `。${subHints[sub]}`;
    }

    return tone;
}

/** 時間帯を取得 */
function getTimeOfDay() {
    const h = new Date().getHours();
    if (h >= 5 && h < 11) return 'morning';
    if (h >= 11 && h < 15) return 'afternoon';
    if (h >= 15 && h < 19) return 'evening';
    return 'night';
}

/** 時間帯ヒント */
function getTimeHint() {
    const t = getTimeOfDay();
    const hints = {
        morning: '朝の挨拶や今日の予定の話題',
        afternoon: 'お昼ごはんや午後の活動の話題',
        evening: '夕方の疲れや今日あったことの振り返り',
        night: '夜のまったりした雰囲気、おやすみ前の話題',
    };
    return hints[t];
}

/** タスク履歴から話題キーワードを抽出 */
function extractTopics(recentTasks) {
    if (!recentTasks || recentTasks.length === 0) return 'まだ何もしてない';
    return recentTasks.slice(0, 5).join('、');
}

/** モック会話を性格＋時間帯に応じて生成（5系統×8パターン = 40セット） */
function getPersonalizedMockChat(personality) {
    const sorted = Object.entries(personality || {})
        .sort(([, a], [, b]) => b - a)
        .filter(([, v]) => v > 0);

    const dominant = sorted.length > 0 ? sorted[0][0] : 'social';
    const time = getTimeOfDay();

    const mockSets = {
        creative: {
            morning: [
                { player: 'おはよ。けさの空いい色だった', npc: 'ほんと？どんな色？教えて教えて' },
                { player: 'ゆめの中で絵を描いてたよ', npc: 'いいなあ、起きても描いてよ' },
                { player: '新しいアイデアが浮かんだ！', npc: 'わくわく！早く形にしちゃおうよ' },
                { player: '朝露がキラキラしてきれい', npc: '宝石みたいだよね、集めたいな' },
                { player: '今日は何を作ろうかな', npc: 'ぼくの似顔絵なんてどう？' },
                { player: '小鳥の声が歌みたい', npc: '一緒に歌っちゃう？ららら〜♪' },
                { player: 'カーテンの柄が顔に見える', npc: 'あはは！想像力ゆたかだね' },
                { player: '朝ごはんの色合いが完璧', npc: '食べるのがもったいなくなっちゃう' },
                { player: '今日は世界が鮮やかだね', npc: 'キミの気分が良いからだよきっと' },
                { player: '落書きしたら傑作ができた', npc: '見せて見せて！美術館に飾ろう' },
                // 追加
                { player: '雲が動物に見える', npc: 'あそこ！ウサギが跳ねてるよ！' },
                { player: '朝の空気って味がする気がする', npc: 'ミント味かな？それともレモン？' },
                { player: 'パジャマの柄、じっと見てると面白い', npc: '迷路みたい？それとも宇宙？' },
                { player: '寝癖が芸術的かも', npc: '前衛的なヘアスタイルだね！' },
                { player: '今日は何を作ろうかな', npc: '今まで見たことないもの作ろうよ！' },
                { player: 'インクの匂いが好き', npc: '創造の香りがするよね' },
                { player: '筆の感触って落ち着く', npc: '相棒と手がつながってる感じ？' },
                { player: '頭の中で音楽が鳴ってる', npc: 'どんな曲？鼻歌で聴かせて！' },
                { player: '落書きが止まらない', npc: '線が勝手に動き出すんだね' },
                { player: '世界がカラフルに見える', npc: 'キミの目が魔法のレンズなんだよ' },
                { player: '伝説素材、やっと1個見つけた！', npc: 'やったね！大事に隠しておこうよ' },
                { player: 'ショップで可愛い家具買ったんだ', npc: 'センスいいね！どこに置こうか？' },
                { player: '図鑑を全部埋めたら何が起こるかな', npc: '究極の奇跡が起きるって噂だよ…！' },
                { player: 'ともだちコード、教えてもらった！', npc: 'わあ！新しい友達に会えるね！' },
                { player: 'この背景、キミに似合ってるよ', npc: 'えへへ、お気に入りの場所なんだ' },
            ],
            afternoon: [
                { player: 'なんか描きたい気分だなあ', npc: 'ぼくのこと描いて！かわいくしてね' },
                { player: '今日の雲おもしろい形してる', npc: 'あれ恐竜に見える！見える？' },
                { player: '光の当たり方が面白いね', npc: '影絵で遊んでみる？' },
                { player: '色鉛筆の匂いが好き', npc: 'わかる、なんか落ち着くよね' },
                { player: 'このデザインどう思う？', npc: '斬新でかっこいい！天才かも' },
                { player: 'お散歩中に面白い石拾った', npc: '顔描いたらペットになるかな？' },
                { player: 'インスピレーションが湧いてきた', npc: '逃がさないで！メモメモ！' },
                { player: '空想の世界に浸ってた', npc: 'どんな世界？ぼくも行きたいな' },
                { player: '工作って時間忘れるよね', npc: '気づいたら夕方になってるよね' },
                { player: '古い切手ってアートだよね', npc: '小さな美術館みたいで素敵だね' },
                // 追加
                { player: 'カフェの看板、いいフォントだね', npc: '文字も絵みたいで楽しいよね' },
                { player: '街中の色が気になる', npc: 'あの看板の赤、目に焼き付くね！' },
                { player: '風の音が歌ってるみたい', npc: 'ピューピュー、ヒュルル♪' },
                { player: '影踏み遊びしようよ', npc: '捕まえられるかな〜？' },
                { player: 'あのビルの形、ロボットみたい', npc: '夜になったら動き出すかもね' },
                { player: '道端の花が笑ってる', npc: 'こっちも笑顔になっちゃうね' },
                { player: '空の色が変わってきた', npc: 'パレットで混ぜた色みたいだね' },
                { player: '何か物語が始まりそう', npc: '主人公はキミとぼくだよ！' },
                { player: 'アイデアが降りてきた！', npc: 'キャッチして！逃さないで！' },
                { player: 'ちょっと休憩して空を見よう', npc: '雲がゆっくり流れていくね' },
            ],
            evening: [
                { player: '夕焼けがきれいだなあ', npc: 'オレンジと紫のグラデーションだね' },
                { player: 'きょう作ったもの見て〜', npc: 'わあ！すごいきれいだね' },
                { player: '影が長くなってきたね', npc: '足が伸びたみたいで面白ーい' },
                { player: '一番星見つけた！', npc: 'お願い事しなくちゃ！' },
                { player: '夕暮れの色って切ないね', npc: 'でも明日への期待の色でもあるよ' },
                { player: '今日の作業はここまでかな', npc: 'お疲れ様！ゆっくり休んでね' },
                { player: '街の明かりが灯り始めたね', npc: 'イルミネーションみたいできれい' },
                { player: '晩御飯のいい匂いがする', npc: 'お腹すいた〜、何かなあ？' },
                { player: 'カラスが鳴いてる', npc: 'お家に帰ろうって言ってるのかな' },
                { player: '今日の反省会しようかな', npc: '反省より褒める会にしよ！' },
                // 追加
                { player: '夕日沈んじゃった', npc: '太陽さんもお家に帰ったんだね' },
                { player: '夜の気配がするね', npc: '空気がひんやりしてきたね' },
                { player: '今日の制作は楽しかったな', npc: 'キミが楽しそうだとぼくも嬉しい！' },
                { player: 'お風呂でアイデア練ろうかな', npc: 'リラックスすると閃くっていうしね' },
                { player: '月の出始めって不思議な色', npc: '赤く見えたりするよね' },
                { player: '家々の窓の光が暖かいね', npc: 'それぞれの物語があるんだね' },
                { player: '夜風が気持ちいい', npc: '一日の疲れを吹き飛ばしてくれるね' },
                { player: '虫の声が変わった？', npc: '夜の演奏会が始まる合図だよ' },
                { player: '明日は何を描こうかな', npc: '夢の中でヒントが見つかるかも' },
                { player: '一日が終わるの早いね', npc: '夢中になってたからだよ！' },
            ],
            night: [
                { player: '夜って創作はかどるよね', npc: 'わかる。静かで集中できるよね' },
                { player: '星ってよく見るときらきらだね', npc: '描いてみたら？きっと素敵だよ' },
                { player: '夢日記つけてみようかな', npc: '面白い夢見たら教えてね' },
                { player: '月が笑ってるみたい', npc: 'キミのこと見守ってるんだよ' },
                { player: '静かすぎて音が聞こえそう', npc: '夜の呼吸が聞こえるのかも' },
                { player: '明日どんな色を使おうかな', npc: 'カラフルな一日にしようね' },
                { player: '寝るのがもったいないな', npc: 'でも寝ないと良い夢見れないよ' },
                { player: '夜風が心地いいね', npc: '窓辺で涼むのも風流だね' },
                { player: '虫の声がオーケストラみたい', npc: '秋の夜長は音楽会だね' },
                { player: 'おやすみ、良い夢を', npc: '夢の中でまた遊ぼうね' },
                // 追加
                { player: '真夜中の静寂が好き', npc: '世界が眠ってる間の秘密の時間だね' },
                { player: '星と星を線で繋ぎたい', npc: '新しい星座を作っちゃおう！' },
                { player: '夜の匂いってあるよね', npc: '雨上がりとか特に感じるよね' },
                { player: '眠くないけど横になろう', npc: '体だけでも休めないとね' },
                { player: 'キャンドルの光って落ち着く', npc: '揺らぐ炎はずっと見てられるね' },
                { player: '遠くで電車の音がする', npc: '誰かを乗せて走ってるんだね' },
                { player: '宇宙のこと考えると眠れない', npc: '広すぎてドキドキしちゃうね' },
                { player: '明日の天気はどうかな', npc: '晴れたらスケッチに行こうよ' },
                { player: '羊じゃなくてタマゴ数える？', npc: 'タマゴがいっぱい…おやすみ…' },
                { player: '闇の中に色が見える気がする', npc: 'それが芸術家の目なんだね' },
            ],
        },
        physical: {
            morning: [
                { player: 'よし、朝から動くぞ！', npc: 'いいね！一緒に走る？' },
                { player: '朝のストレッチ気持ちいい〜', npc: 'ぼくもやる！ぐぐーっとね' },
                { player: '早起きは三文の徳だね', npc: 'あと二文はおまけしておくよ' },
                { player: '今日も筋肉が喜んでる', npc: 'マッスルマッスル！' },
                { player: '朝一番の水がうまい！', npc: '体に染み渡るよね〜' },
                { player: 'ラジオ体操完璧にやった', npc: 'スタンプ押してあげる！' },
                { player: '空気が澄んでて気持ちいい', npc: '深呼吸しよう！スーハースーハー' },
                { player: '階段ダッシュしてきた', npc: '元気すぎ！ついていけないよ〜' },
                { player: '朝ごはんガッツリ食べるぞ', npc: 'エネルギー充填だね！' },
                { player: '今日も一日頑張ろう！', npc: 'オー！気合い入れていこう！' },
                // 追加
                { player: '目覚め最高！飛び起きちゃった', npc: 'ベッドがトランポリンみたいだった？' },
                { player: '朝日を浴びてパワーアップ', npc: '光合成してるみたいだね' },
                { player: '朝ラン行ってきたよ', npc: '爽やかな汗だね！タオルどうぞ' },
                { player: '今日の筋肉の調子はどう？', npc: '最高！キレてるよ！' },
                { player: '朝から腹筋100回！', npc: 'すごすぎて言葉が出ない…' },
                { player: 'バランスボールで朝食食べた', npc: '体幹鍛えすぎでしょ！' },
                { player: 'スニーカーの紐をギュッと結ぶ', npc: 'やる気スイッチオンだね' },
                { player: 'プロテインシェイカー振る音で起きた', npc: '目覚まし代わりだね' },
                { player: 'まだ眠いけど動けば起きる！', npc: 'その意気だ！ゴーゴー！' },
                { player: '今日の目標は自己ベスト更新', npc: '自分との戦いだね応援してる！' },
                { player: '筋トレの報酬で伝説素材ゲット！', npc: 'パワーが形になったんだね！' },
                { player: 'ショップのパック、中身が気になる', npc: '開ける時のワクワクが最高だよね' },
                { player: '図鑑コンプリートまであと少し！', npc: 'ボクたちの最強の証まで、突っ走ろう！' },
                { player: 'ともだち招待、どんどんしようぜ！', npc: '大勢で遊んだほうが楽しいもんね！' },
                { player: '伝説の背景を手に入れたい！', npc: 'そのためにはもっと修行が必要かも？' },
            ],
            afternoon: [
                { player: 'お昼食べたし動こうかな', npc: '散歩いこうよ！天気いいし' },
                { player: 'きょうめっちゃ走ったよ！', npc: 'すごい！何キロ？えらい！' },
                { player: 'ちょっと筋トレしてくる', npc: 'ムキムキになっちゃうの？' },
                { player: '体がウズウズする', npc: 'ダンスでも踊っちゃう？' },
                { player: 'スポーツ観戦したいな', npc: '応援するのって熱くなるよね！' },
                { player: 'プロテイン飲んだ？', npc: 'ぼくはジュースがいいな〜' },
                { player: '姿勢を良くすると集中できる', npc: '背筋ピーン！だね' },
                { player: 'キャッチボールしようぜ', npc: 'ボール取るの苦手だけど頑張る' },
                { player: '自己ベスト更新した！', npc: 'おめでとう！努力の成果だね' },
                { player: '汗かくって最高！', npc: 'シャワー浴びてスッキリしよ！' },
                // 追加
                { player: '階段とエレベーター、どっち？', npc: 'もちろん階段ダッシュだよね！' },
                { player: '重い荷物持つよ', npc: '筋トレのチャンスだもんね' },
                { player: '一駅分歩いちゃおうかな', npc: 'グッドアイデア！景色も楽しめるし' },
                { player: 'スクワット競争しよう', npc: 'ぼく足短いけど負けないよ！' },
                { player: '公園の鉄棒で懸垂！', npc: '子供たちがびっくりしてたよ' },
                { player: 'エネルギー切れだ…', npc: 'バナナ食べて回復だ！' },
                { player: '新しいトレーニングウェア欲しい', npc: '形から入るのも大事だよね' },
                { player: 'スポーツドリンクが美味しい', npc: '生き返る〜って感じ？' },
                { player: '縄跳び二重跳びできた！', npc: 'ヒュンヒュン音がすごかったよ' },
                { player: '休憩もトレーニングのうち', npc: 'リラックスして筋肉を育てよう' },
            ],
            evening: [
                { player: '筋肉痛…でも気持ちいい', npc: 'がんばった証拠だよ！えらい！' },
                { player: '今日もいい汗かいたなあ', npc: 'お疲れ！ご褒美なに食べる？' },
                { player: '夕方は涼しくて走りやすい', npc: '風を切って走るのかっこいい！' },
                { player: 'お腹ペコペコだ〜', npc: 'いっぱい食べて回復しなきゃ' },
                { player: 'お風呂でマッサージしよ', npc: 'ふくらはぎ揉むといいらしいよ' },
                { player: 'まだ体力残ってるかも', npc: '無理しないでね、明日もあるよ' },
                { player: '夕焼けに向かってダッシュ！', npc: '青春だねえ〜' },
                { player: '今日のトレーニング完了', npc: 'ミッションコンプリート！' },
                { player: '足が棒のようだ', npc: 'ゆっくり休ませてあげてね' },
                { player: 'スポーツニュース見なきゃ', npc: '結果どうだったかな？' },
                // 追加
                { player: '夕暮れのグラウンドってエモい', npc: '部活終わりを思い出すね' },
                { player: 'プロテイン飲むタイミングは今！', npc: 'ゴールデンタイムだね' },
                { player: '今日の消費カロリーすごそう', npc: 'ダイエット大成功かな？' },
                { player: 'ストレッチしてクールダウン', npc: '怪我しないようにね' },
                { player: 'お風呂上がりの牛乳最高', npc: '腰に手を当てて飲まなきゃ' },
                { player: '足ツボマッサージ痛い！', npc: 'そこが悪いところなんだよ…' },
                { player: '明日晴れるかな、走りたいな', npc: 'テルテル坊主作っておくね' },
                { player: '心地よい疲労感だ', npc: '今日はぐっすり眠れそうだね' },
                { player: '鏡で筋肉チェック', npc: 'ちょっと大きくなったんじゃない？' },
                { player: '早く寝て成長ホルモン出すぞ', npc: '寝る子は育つ、だよ！' },
            ],
            night: [
                { player: 'あしたも朝からトレーニング', npc: 'やるなあ！ぼくは応援するね' },
                { player: '今日は早く寝て回復するか', npc: '休むのもトレーニングだよね' },
                { player: '寝る前のストレッチ大事', npc: 'よく眠れるようになるよ' },
                { player: 'プロテイン飲んで寝よ', npc: '寝てる間に筋肉育つかな' },
                { player: 'ぐっすり眠れそう', npc: 'いい夢見てね、おやすみ' },
                { player: '布団が気持ちいい〜', npc: 'ダイブしちゃえ！' },
                { player: '明日の天気はどうかな', npc: '晴れるといいね、運動日和！' },
                { player: '目を閉じると走ってる夢見そう', npc: '夢の中でもトレーニング？' },
                { player: '深呼吸してリラックス', npc: '一日の疲れを吐き出そう' },
                { player: 'おやすみ、マッスル', npc: 'マッスルおやすみ！' },
                // 追加
                { player: '布団の中で腹筋しちゃダメ？', npc: 'ダメだよ！ちゃんと休んで！' },
                { player: '明日のメニュー考えてる', npc: 'ストイックだねぇ…感心するよ' },
                { player: '枕の高さ、これでいいかな', npc: '首のケアもアスリートには大事だね' },
                { player: '静かだね、心拍数が聞こえる', npc: 'トクン、トクンってね' },
                { player: 'アイマスクして完全遮光', npc: '質の高い睡眠へのこだわりだね' },
                { player: '明日起きたら一番に何しよう', npc: 'もちろんスクワットでしょ？' },
                { player: '夢で空飛べたらいいな', npc: '背中の筋肉で羽ばたけるかも' },
                { player: '今日もお疲れ様、自分', npc: 'よく頑張ったね、ヨシヨシ' },
                { player: '寝返り打つのも運動？', npc: 'それはノーカウントだよ笑' },
                { player: 'おやすみ、最強の自分', npc: '明日はもっと強くなってるよ' },
            ],
        },
        social: {
            morning: [
                { player: 'おはよ！きょうは誰に会える？', npc: 'ぼくがここにいるよ〜' },
                { player: 'きょうは友達と会う約束！', npc: 'いいなあ！楽しんできてね' },
                { player: '元気な挨拶でスタート！', npc: 'おっはよーございまーす！' },
                { player: 'みんな起きてるかな？', npc: 'まだ寝坊助さんもいるかもね' },
                { player: 'SNSチェックしなきゃ', npc: '面白い投稿あった？' },
                { player: '今日のファッションどう？', npc: '似合ってる！おしゃれだね' },
                { player: '誰かと話したい気分', npc: 'ぼくでよければいつでも！' },
                { player: 'お隣さんに挨拶したよ', npc: 'えらい！気持ちいいね' },
                { player: '今日はパーティしたいな', npc: '何のパーティする？' },
                { player: '笑顔でいればいいことある', npc: 'ニコニコしてると集まってくるよ' },
                // 追加
                { player: '鏡で笑顔の練習！', npc: '口角上げて〜、はいチーズ！' },
                { player: '今朝の星占い1位だった！', npc: 'ラッキーアイテムは何かな？' },
                { player: '新しいスタンプ買ったよ', npc: '送って送って！見たい！' },
                { player: 'バス停で知り合いに会った', npc: '朝からおしゃべり弾んだ？' },
                { player: '今日のランチ誰誘おうかな', npc: '人気者は忙しいね〜' },
                { player: '髪型変えてみたんだ', npc: '素敵！みんな気づいてくれるよ' },
                { player: 'いい天気だと人出が多いね', npc: '賑やかなのってワクワクするね' },
                { player: '困ってる人助けたよ', npc: '優しいね！きっと感謝されてるよ' },
                { player: '朝のグループチャットが盛り上がってる', npc: '通知が鳴り止まないね笑' },
                { player: '今日もたくさんの人と繋がるぞ', npc: '友達100人できるかな？' },
            ],
            afternoon: [
                { player: 'みんなでお昼食べたよ〜', npc: 'なに食べたの？おいしかった？' },
                { player: 'おしゃべりって楽しいね', npc: 'ねー！もっと話そうよ！' },
                { player: '友達と喧嘩しちゃった', npc: '仲直りできるよ、大丈夫' },
                { player: '噂話聞いちゃった', npc: 'えっ、なになに？内緒話？' },
                { player: 'カフェでお茶したいな', npc: 'おしゃれなカフェ知ってる？' },
                { player: '今度みんなで旅行行こうよ', npc: '行きたい！どこ行く？' },
                { player: '手紙書くのっていいよね', npc: '返事が来るのも楽しみだよね' },
                { player: '電話してみようかな', npc: '声聞くと安心するよね' },
                { player: '新しい友達できた！', npc: 'わあ、紹介してして！' },
                { player: 'みんなの笑顔が好き', npc: 'こっちまで幸せになるよね' },
                { player: '伝説素材、みんなで探さない？', npc: 'いいね！宝探しみたいでワクワクする！' },
                { player: 'ショップの家具、みんなで選ぼうよ', npc: '賛成！パーティルーム作っちゃう？' },
                { player: '図鑑を全部埋めて神様に会いたいな', npc: 'みんなが揃えば、きっと奇跡が起きるよ！' },
                { player: 'ともだち招待、ボクから誘ってみるね', npc: 'わあ！新しい友達が増えるの楽しみ！' },
                // 追加
                { player: '行列のできる店に並んでる', npc: '並んでる間のおしゃべりも楽しいよね' },
                { player: '写真いっぱい撮っちゃった', npc: 'アルバム作らなきゃだね' },
                { player: 'サプライズパーティの計画中', npc: '絶対喜んでくれるよ！大成功間違いなし！' },
                { player: '悩み事相談されたんだ', npc: '親身になって聞いてあげてね' },
                { player: 'カラオケ行きたい気！', npc: 'デュエットしちゃう？' },
                { player: 'クラス全員と話したかも', npc: '聖徳太子みたいだね！' },
                { player: '迷子の案内したよ', npc: '人助けの達人だね' },
                { player: 'フリーマーケット面白そう', npc: '掘り出し物が見つかるかも' },
                { player: '街頭インタビュー受けちゃった', npc: 'えー！テレビ映るかな？' },
                { player: 'みんなでシェアすると美味しいね', npc: '色んな味が楽しめてお得だね' },
            ],
            evening: [
                { player: '今日はいい1日だったなあ', npc: 'よかったね！何が楽しかった？' },
                { player: 'まだ帰りたくないなあ', npc: 'じゃあもうちょっとだけね' },
                { player: '寄り道して帰ろうかな', npc: '新しい発見があるかも' },
                { player: 'みんな無事に帰ったかな', npc: 'きっと今頃ご飯食べてるよ' },
                { player: '夕飯なに食べるか迷う', npc: 'みんなで鍋とかどう？' },
                { player: '今日の出来事を共有したい', npc: '聞くよ聞くよ！' },
                { player: 'お土産買ってきたよ', npc: 'わーい！ありがとう！' },
                { player: '街が賑わってるね', npc: 'みんな楽しそうだね' },
                { player: '誰かに「ありがとう」って言った？', npc: '言う方も言われる方も嬉しいよね' },
                { player: 'そろそろお開きの時間か', npc: 'また明日も会えるよ' },
                // 追加
                { player: '夕暮れの帰り道って少し寂しい', npc: 'また会えるのが待ち遠しいね' },
                { player: '今日の打ち上げしたい気分', npc: '毎日がお祭りだね' },
                { player: '友達の家泊まりたいな', npc: 'パジャマパーティーしちゃう？' },
                { player: 'SNSに今日の写真アップしよ', npc: 'いいね！がいっぱい付くよ' },
                { player: '電車で席譲ったよ', npc: '心が温まるね' },
                { player: '家族にお土産買った', npc: 'きっと喜ぶよ、優しいね' },
                { player: '待ち合わせ場所のネオンが綺麗', npc: '都会の夜って感じだね' },
                { player: 'また明日ねって言葉が好き', npc: '未来の約束だもんね' },
                { player: '今日のMVPは誰かな？', npc: '盛り上げ役のキミだよ！' },
                { player: '家に帰るまでが遠足です', npc: '気をつけて帰ってね' },
            ],
            night: [
                { player: 'きょうも楽しかったー', npc: 'ぼくも楽しかった！おやすみ〜' },
                { player: 'あしたもみんなに会いたいな', npc: 'きっと会えるよ！楽しみだね' },
                { player: 'SNS見てたら時間経っちゃった', npc: 'あるあるだね、寝不足注意！' },
                { player: '寝る前に誰かの声聞きたい', npc: 'ぼくの声でよければ！' },
                { player: '良い夢見れますように', npc: 'みんな幸せな夢見てるといいな' },
                { player: 'おやすみメール送った？', npc: '返事来るといいな' },
                { player: '明日着てく服決めた？', npc: 'ばっちりコーディネートしよ' },
                { player: '静かな夜もたまにはいい', npc: '自分と向き合う時間だね' },
                { player: 'みんなのこと大好きだなって', npc: 'みんなもキミのこと大好きだよ' },
                { player: 'また明日ね、おやすみ', npc: 'また明日！バイバイ！' },
                // 追加
                { player: '長電話しちゃった', npc: '耳が熱くなってるんじゃない？' },
                { player: '寝る前に寄せ書き読み返してる', npc: '友情パワー充電中だね' },
                { player: '明日の天気が気になる', npc: '晴れたらピクニック行こうよ' },
                { player: '一人が寂しくなってきた', npc: 'ぼくがついてるよ、そばにいるよ' },
                { player: '羊が一匹、羊が二匹…', npc: '羊さんのパレードだね' },
                { player: '遠くのサイレンが聞こえる', npc: '誰かが頑張ってるんだね' },
                { player: '明日話したいネタ考えた', npc: 'みんな爆笑間違いなしだね' },
                { player: 'おやすみ、地球のみんな', npc: 'スケールが大きいおやすみだね' },
                { player: '枕投げしたかったな', npc: '夢の中でやろうよ！' },
                { player: '明日はもっと沢山笑おう', npc: '笑顔は伝染するからね' },
            ],
        },
        intellectual: {
            morning: [
                { player: 'きょうは何を学ぼうかな', npc: 'おすすめの本あるよ、読む？' },
                { player: '朝の読書は集中できていいね', npc: '静かな時間って貴重だよね' },
                { player: '新聞読んだ？', npc: '世の中の動きを知るのは大事だね' },
                { player: '今日の予定を完璧に立てた', npc: '計画通りに進むといいね' },
                { player: '脳が冴えてる気がする', npc: '難しいパズル解けるかも？' },
                { player: '朝のニュース興味深かった', npc: 'どんな内容？教えて？' },
                { player: 'コーヒー飲みながら思考タイム', npc: 'カフェインで脳活性化だね' },
                { player: '単語帳見てた', npc: '継続は力なり、だね' },
                { player: '疑問が解決してスッキリ', npc: 'アハ体験だ！' },
                { player: '今日は図書館行こうかな', npc: '本の森で迷子になりたい' },
                // 追加
                { player: '朝から数独解いちゃった', npc: '頭の体操バッチリだね' },
                { player: '今日の目標を書き出したよ', npc: '可視化するのは効果的らしいね' },
                { player: '通学路で植物観察', npc: '名前分かると楽しいよね' },
                { player: '計算ドリルした', npc: 'タイム縮まった？' },
                { player: '歴史の年号語呂合わせ', npc: 'ナクヨウグイス平安京！' },
                { player: '朝一番のアウトプット', npc: 'インプットしたら出さないとね' },
                { player: '電車の乗り換え完璧だった', npc: '最適解を見つけたんだね' },
                { player: '今日は英語で考えてみよう', npc: 'Good morning! How are you?' },
                { player: '筆記用具の手入れをしたよ', npc: '弘法筆を選ばず…でも大事だよね' },
                { player: '知識欲が止まらない', npc: 'キミの脳みそブラックホールだ！' },
            ],
            afternoon: [
                { player: '面白い発見があったんだ', npc: 'へえ！くわしく聞かせて' },
                { player: '勉強ってやり始めると楽しい', npc: '分かる。止まらなくなるよね' },
                { player: 'この数式の美しさがわかる？', npc: 'うーん、まだ勉強不足かも' },
                { player: '歴史ってドラマチックだよね', npc: '事実は小説より奇なり、だっけ' },
                { player: '実験してみようかな', npc: '爆発しないように気をつけてね' },
                { player: '積読を消化しなきゃ', npc: '読むスピードより買うスピードが早いの？' },
                { player: '集中力が切れてきた', npc: '糖分補給してリフレッシュしよ' },
                { player: '辞書引くのって楽しい', npc: '言葉の海を泳いでる気分' },
                { player: 'これは論理的におかしいな', npc: '鋭い指摘！流石だね' },
                { player: '知恵の輪解けた！', npc: 'おー！IQ高そう！' },
                { player: '伝説素材のエネルギー効率を計算中', npc: '未知のパワーが秘められてるね' },
                { player: 'ショップのラインナップを分析したよ', npc: '戦略的な自己投資が必要だね' },
                { player: '図鑑コンプリート後の事象を予測しよう', npc: '究極の存在...特異点の発生かな？' },
                { player: '招待システムの最適化を考えてみた', npc: '人脈の拡張は情報収集に不可欠だね' },
                // 追加
                { player: '博物館に行きたいな', npc: '知的好奇心が刺激されるよね' },
                { player: 'チェス盤の模様が気になる', npc: '白と黒の戦略の世界だね' },
                { player: '雲の生成過程について考えてた', npc: '気象学の分野だね' },
                { player: '円周率どこまで言える？', npc: '3.141592...あとなんだっけ' },
                { player: '資料整理してスッキリ', npc: '整理整頓は思考の整理だよ' },
                { player: 'このバグの原因はなんだろう', npc: 'デバッグ作業ファイト！' },
                { player: 'ことわざって深いよね', npc: '先人の知恵が詰まってるからね' },
                { player: '元素記号の歌うたえる？', npc: 'スイヘーリーベ…♪' },
                { player: '難問が解けた時の快感！', npc: 'ドーパミン出まくりだね！' },
                { player: '図書館の静寂が好き', npc: '本たちの話し声が聞こえそう' },
            ],
            evening: [
                { player: 'きょう知ったこと整理したい', npc: 'メモしておくといいかもね' },
                { player: 'あの仕組みが面白かった', npc: 'どうやって動いてるの？' },
                { player: 'クイズ番組見たい', npc: '早押しで勝負だ！' },
                { player: '議論するのって刺激的', npc: '違う意見を聞くのも勉強だね' },
                { player: '今日の勉強量は十分かな', npc: 'よく頑張ったよ、花丸！' },
                { player: '本屋に寄って帰る', npc: '新刊出てるかチェックだね' },
                { player: 'ドキュメンタリー見るんだ', npc: '真実の世界を知りたいんだね' },
                { player: '頭使いすぎてお腹すいた', npc: '脳の消費カロリーってすごいらしいよ' },
                { player: '星の動きを観察しよう', npc: '天文学もロマンがあるね' },
                { player: '今日の復習しなきゃ', npc: 'エビングハウスの忘却曲線対策だね' },
                // 追加
                { player: '夕焼けのメカニズム知ってる？', npc: '光の散乱だよね？レイリー散乱！' },
                { player: '塾の帰り道', npc: '今日も一日お勉強お疲れ様' },
                { player: '単語カードめくりながら歩く', npc: '二宮金次郎スタイルだね' },
                { player: 'クロスワードパズル解いた', npc: 'ボキャブラリーが増えるね' },
                { player: 'ニュースの深読みしてみた', npc: '裏側の事情まで考察したの？' },
                { player: '今日の学びをブログに書こう', npc: '教えることが一番の勉強になるよ' },
                { player: '辞書の紙の手触りが好き', npc: '薄いのに裏写りしなくてすごいよね' },
                { player: '脳みそがパンクしそう', npc: '甘いもの食べてクールダウンして' },
                { player: '明日テストなんだ', npc: 'キミなら大丈夫！実力出し切って！' },
                { player: '「知る」って楽しいね', npc: '世界が広がっていく感覚だよね' },
            ],
            night: [
                { player: '寝る前に少し読書しようかな', npc: '読みすぎて夜ふかしに注意だよ' },
                { player: '知らないことがまだ多いな', npc: 'だから毎日が面白いんだよね' },
                { player: '哲学的なことを考えてしまう', npc: '夜は思考が深まる時間だね' },
                { player: '明日の予習ばっちり', npc: '余裕を持って授業受けられるね' },
                { player: '静かにチェスでもしたい', npc: 'ぼくが相手になるよ！' },
                { player: '脳に休息を与えよう', npc: '睡眠中の記憶整理も大事だよ' },
                { player: '今日学んだこと忘れないぞ', npc: '寝てる間に定着するはず' },
                { player: '百科事典眺めて寝よう', npc: 'いい夢見そう？それとも悪夢？' },
                { player: '宇宙の果てはどうなってるの', npc: '想像するだけで眠れなくなりそう' },
                { player: 'おやすみ、知の探究者', npc: 'おやすみ、賢者さま' },
                // 追加
                { player: '寝ながら英語の聞き流し', npc: '潜在意識に刷り込む作戦？' },
                { player: '明日のシミュレーション完璧', npc: '備えあれば憂いなしだね' },
                { player: '本の栞どこまで進んだ？', npc: 'もうすぐクライマックス！' },
                { player: '静寂が思考を研ぎ澄ます', npc: '賢者の時間だね' },
                { player: '夢でアルキメデスに会いたい', npc: 'ユーレカ！って叫んじゃうかも' },
                { player: '電気消しても考え事が止まらない', npc: '羊数えて強制終了しよう' },
                { player: '今日の反省点を分析中', npc: 'PDCAサイクル回してるね' },
                { player: '明日は図書館の開館一番に行く', npc: '一番乗りの称号ゲットだね' },
                { player: '知的好奇心は眠らない', npc: '体は寝かせてあげて〜' },
                { player: 'おやすみ、論理の世界', npc: 'また明日、理性の世界で逢おう' },
            ],
        },
        chaotic: {
            morning: [
                { player: '朝からなんか変なことしたい', npc: 'いいね！何する？巻き込んで！' },
                { player: 'ゆめが意味わからんかった', npc: 'あはは！それ最高だね' },
                { player: 'パジャマで外に出たい', npc: '新しいファッションって言い張ろう' },
                { player: '朝ごはんカレーとケーキ？', npc: '胃袋がびっくりしちゃうよ' },
                { player: '世界を逆さまに見たら面白そう', npc: '倒立して歩いてみる？' },
                { player: '今日は何色に見える？', npc: 'レインボーカラーかな！' },
                { player: '宇宙人と交信したかも', npc: 'ワレワレハ…って言ってた？' },
                { player: 'スリッパ片方見つからない', npc: '旅に出たのかもね' },
                { player: '目覚まし時計分解した', npc: 'えっ、元に戻せるの？' },
                { player: '今日は後ろ向きに歩こう', npc: '背中に目がついてるみたい！' },
                // 追加
                { player: '歯磨き粉と洗顔間違えた！', npc: 'あわわ！口の中スッキリしすぎ？' },
                { player: '今日は語尾に「にゃん」をつけるにゃん', npc: 'わかったにゃん！' },
                { player: '靴下左右違うの履いてみた', npc: 'アシンメトリーでおしゃれ！' },
                { player: '朝からダジャレ言いたい', npc: '布団が吹っ飛んだ！…どう？' },
                { player: '寝癖がアンテナみたい', npc: '宇宙からの電波受信中？' },
                { player: 'トーストの焼き目が顔に見える', npc: '食べるのかわいそう？ガブッといこう！' },
                { player: 'わざと遠回りして駅まで行く', npc: '迷子にならないでね' },
                { player: '今日はハイテンションでいくぜ！', npc: 'イエーイ！ついていくよ！' },
                { player: '急に走り出したくなった', npc: 'よーいドン！' },
                { player: '何も決めてないけど出発進行！', npc: '行き当たりばったりも楽しいよね' },
            ],
            afternoon: [
                { player: 'なんか面白いことないかな', npc: '逆立ちしてお昼食べるとか？' },
                { player: '退屈ってある意味すごいよね', npc: '退屈をぶっ壊す方法考えよう！' },
                { player: '雲に乗れる気がする', npc: 'ジャンプしてみる？' },
                { player: '猫語で話しかけてみた', npc: 'ニャーって返事してくれた？' },
                { player: '突然踊りだしたくなった', npc: 'レッツダンス！踊り狂おう！' },
                { player: '変顔の練習してる', npc: 'プッ…すごい顔！優勝！' },
                { player: '蟻の行列についていった', npc: 'お菓子の国に着いた？' },
                { player: '石ころと会話してる', npc: 'なんて言ってるの？重いって？' },
                { player: '水たまりに飛び込みたい', npc: '泥だらけになっちゃうよ〜' },
                { player: '空想上の生き物描いた', npc: '名前つけてあげよう！' },
                { player: '伝説素材、食べたらどうなるかな', npc: '体から黄金のビームが出ちゃいそう！' },
                { player: 'ショップの全商品をマドラーで混ぜたい', npc: 'カオスすぎるｗ 何が生まれるの！？' },
                { player: '図鑑が埋まると宇宙がひっくり返るよ', npc: 'わーい！逆さまの世界だー！' },
                { player: '招待コードをロケットに乗せて飛ばした', npc: '宇宙人も遊びに来ちゃうかもね！' },
                // 追加
                { player: '全部のボタン押したい衝動', npc: '自爆ボタンだけは気をつけて！' },
                { player: '影が逃げていくよ', npc: 'まてまて〜！捕まえろ！' },
                { player: '風と競争した', npc: 'どっちが勝った？' },
                { player: '木登りしたい気分', npc: 'お猿さんみたいだね' },
                { player: '大声で叫びたい！', npc: '王様の耳はロバの耳〜！' },
                { player: '地面に落書きしちゃった', npc: '雨が降れば消えるからセーフ？' },
                { player: '自動販売機の下に何かあるかも', npc: '小銭見つけたらジュース奢ってね' },
                { player: '鳩を追いかけてみた', npc: 'ポッポ〜って逃げてった？' },
                { player: '見えない敵と戦ってる', npc: '必殺技出た！？' },
                { player: '今日は全部「イエス」って言う日', npc: 'じゃあおやつ全部ちょーだい！' },
            ],
            evening: [
                { player: 'きょうもカオスだったなあ', npc: 'それが一番楽しいじゃん！' },
                { player: 'さっき変なもの見つけた', npc: '見せて見せて！気になる！' },
                { player: '夕日が爆発してるみたい', npc: 'ドッカーン！って感じだね' },
                { player: '影踏み鬼しようぜ', npc: '負けないぞ〜！' },
                { player: '帰り道迷子になった', npc: '冒険の始まりだね！' },
                { player: 'カエルの合唱に参加した', npc: 'ゲロゲーロ♪上手だね' },
                { player: '電柱と背比べした', npc: 'どっちが勝った？' },
                { player: '風の匂いがする', npc: 'なんの匂い？冒険の匂い？' },
                { player: 'お腹がグーって鳴った', npc: 'お腹の中に怪獣がいるかも' },
                { player: '今日は一日長かったな', npc: '中身が濃すぎたからね' },
                // 追加
                { player: 'コウモリとお話しできるかな', npc: '超音波出せればいけるかも' },
                { player: '夕闇に紛れて忍者ごっこ', npc: 'ニンニン！ドロンします！' },
                { player: '家に帰りたくない病発症', npc: 'じゃあ公園で野宿する？笑' },
                { player: '電信柱と背比べした', npc: 'まだまだ勝てないね〜' },
                { player: '今日の晩御飯、当ててみて', npc: '闇鍋…じゃないよね？' },
                { player: '一番星に向かってUFO呼んだ', npc: '迎えに来てくれるかな？' },
                { player: 'カラスの真似して帰った', npc: 'カァ〜カァ〜アホォ〜' },
                { player: 'スキップしながら帰宅', npc: 'ルンルン気分だね' },
                { player: '今日笑いすぎてお腹痛い', npc: '幸せな腹筋痛だね' },
                { player: '明日地球が滅亡したらどうする？', npc: '最後まで一緒に遊ぼうよ！' },
            ],
            night: [
                { player: '夜中のテンションってやばい', npc: '分かる！なんか無敵な気分' },
                { player: 'あした何が起こるか楽しみ', npc: '何にも決めないのが最高だよね' },
                { player: '枕投げ大会開催！', npc: '受けて立つ！えいっ！' },
                { player: '布団の中で探検ごっこ', npc: '懐中電灯持って潜ろう' },
                { player: 'お化けっているかな', npc: '友達になれるかな？' },
                { player: '夜食にカップ麺食べたい', npc: '背徳の味…おいしいよね' },
                { player: '月に向かって吠えてみる', npc: 'ワオーン！狼男だ！' },
                { player: '目を開けたまま寝れるかな', npc: 'ドライアイになっちゃうよ' },
                { player: '夢の中で空飛びたい', npc: 'イメージトレーニング大事だよ' },
                { player: 'おやすみ、クレイジーワールド', npc: 'また明日、カオスな世界で！' },
                // 追加
                { player: '布団の中で秘密基地作った', npc: '合言葉言わないと入れないぞ' },
                { player: '夜中にラーメン食べたい', npc: '飯テロやめて〜お腹すく〜' },
                { player: '天井のシミが動いた気がする', npc: 'キャー！見なかったことにしよう！' },
                { player: '冷蔵庫のプリン誰のか知ってる？', npc: '食べちゃえ！…怒られるかな？' },
                { player: '布団が重い…妖怪のせい？', npc: 'ぬりかべが乗ってるのかも' },
                { player: '寝言録音アプリ仕掛けた', npc: '明日聞くのが楽しみだね' },
                { player: '目を開けたまま寝れるかな', npc: 'ドライアイになっちゃうよ' },
                { player: '明日は今日より面白くなる予感', npc: '予感的中でありますように！' },
                { player: '羊がダンスしてる', npc: '賑やかな夜だね' },
                { player: 'おやすみスリー、ツー、ワン！', npc: 'ゼロ！爆睡！' },
            ],
        },
    };

    let lastMockText = '';

    const dominantSet = mockSets[dominant] || mockSets.social;
    const timeSet = dominantSet[time] || dominantSet.afternoon;

    // 前回と同じテキストを避ける（最大5回試行）
    let item = timeSet[Math.floor(Math.random() * timeSet.length)];
    for (let i = 0; i < 5; i++) {
        if (item.player !== lastMockText) break;
        item = timeSet[Math.floor(Math.random() * timeSet.length)];
    }
    lastMockText = item.player;

    return { ...item };
}

/**
 * Gemini APIで会話を生成（複数キャラ対応）
 */
export async function generateChat(apiKey, playerChar, personality, recentTasks, friends = []) {
    if (!apiKey) {
        const mock = getPersonalizedMockChat(personality);
        return {
            messages: [
                { speaker: 'player', text: mock.player },
                { speaker: 'npc', text: mock.npc },
            ],
        };
    }

    const playerTone = getToneStyle(personality);
    const topicsText = extractTopics(recentTasks);
    const timeHint = getTimeHint();

    // 会話参加者を決定
    let opponent;
    if (friends.length > 0) {
        const pick = friends[Math.floor(Math.random() * friends.length)];
        opponent = {
            name: pick.name,
            tone: getToneStyle(pick.personality),
            desc: pick.personalitySummary || 'ふしぎなやつ',
        };
    } else {
        opponent = {
            name: NPC_CHARACTER.name,
            tone: 'のんびり屋で天然。「〜だよ〜」が口癖',
            desc: NPC_CHARACTER.personalitySummary,
        };
    }

    const prompt = `あなたは2体のモンスターのゆるい日常会話を書くライターです。
それぞれの性格に合った、テンプレ感のない自然な会話を1往復書いてください。

【${playerChar.name}】(Lv${playerChar.level})
- 口調: ${playerTone}
- 最近やったこと: ${topicsText}

【${opponent.name}】
- 口調: ${opponent.tone}
- 性格: ${opponent.desc}

シチュエーション: ${timeHint}

必須ルール:
- 各セリフ30文字以内
- ひらがな多め
- ${playerChar.name}は最近やったことの話題を絡める
- 毎回違う話題と言い回し。テンプレっぽさを排除
- 直前の会話と同じ内容にしない
- 絵文字・顔文字は禁止
- JSON出力のみ: {"player":"セリフ","npc":"セリフ"}`;

    try {
        const response = await fetch(`${GEMINI_API_URL}?key=${apiKey}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    temperature: 1.1,
                    maxOutputTokens: 200,
                },
            }),
        });

        if (!response.ok) {
            console.warn('Gemini API応答エラー:', response.status);
            const mock = getPersonalizedMockChat(personality);
            return {
                messages: [
                    { speaker: 'player', text: mock.player },
                    { speaker: 'npc', text: mock.npc, speakerName: opponent.name },
                ],
            };
        }

        const data = await response.json();
        const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';

        const jsonMatch = text.match(/\{[\s\S]*?\}/);
        if (jsonMatch) {
            const parsed = JSON.parse(jsonMatch[0]);
            if (parsed.player && parsed.npc) {
                return {
                    messages: [
                        { speaker: 'player', text: parsed.player },
                        { speaker: 'npc', text: parsed.npc, speakerName: opponent.name },
                    ],
                };
            }
        }

        const mock = getPersonalizedMockChat(personality);
        return {
            messages: [
                { speaker: 'player', text: mock.player },
                { speaker: 'npc', text: mock.npc },
            ],
        };
    } catch (err) {
        console.warn('Gemini API呼び出し失敗:', err);
        const mock = getPersonalizedMockChat(personality);
        return {
            messages: [
                { speaker: 'player', text: mock.player },
                { speaker: 'npc', text: mock.npc },
            ],
        };
    }
}

/** 性格パラメータから簡潔なサマリーを作る */
export function buildPersonalitySummary(personality) {
    const labels = {
        creative: 'クリエイティブ',
        physical: '体を動かすのが好き',
        social: '人懐っこい',
        intellectual: '知識欲が強い',
        chaotic: '自由奔放',
    };

    const sorted = Object.entries(personality)
        .sort(([, a], [, b]) => b - a)
        .filter(([, v]) => v > 0);

    if (sorted.length === 0) return '生まれたばかりで性格未定';

    return sorted.slice(0, 2).map(([k]) => labels[k]).join('で');
}

/** ランダムなガイドメッセージを取得 */
export function getRandomGuideMessage() {
    const hints = [
        "100個タスクを達成すると、いいことがあるかも？",
        "ショップで手に入るパックには、伝説素材が入ってることもあるよ。",
        "背景や家具を変えると、ボクたちの気分も変わるんだ！",
        "ともだちコードを入力すると、遠くの友達が遊びに来てくれるよ。",
        "伝説素材をたくさん集めると、図鑑がもっと賑やかになるね。",
        "図鑑をコンプリートすると、究極の何かが起こるって噂だよ...！",
        "午前10時〜12時に「知能」が高いと会える幻の猫がいるらしい...",
        "早朝5時にしか現れないバグったモンスターがいるんだって。",
        "長く続けると王様になれるって噂だよ！",
        "完了したタスクの数だけ、ボクたちは強くなれるんだ。",
        "たまには昔のタスクを振り返ってみるのもいいかもね。",
        "新しい友達、増えたかな？(ともだち招待を試してみて！)",
        "モンスターはレベルアップで姿が変わることもあるんだ。",
        "全力応援パックを買うと、開発者の秘密ログが読めるようになるよ！",
        "図鑑コンプリートの先には、神様が待っているかもしれない..."
    ];

    return hints[Math.floor(Math.random() * hints.length)];
}
