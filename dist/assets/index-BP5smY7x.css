:root{--bg-primary: #FFF5F7;--bg-secondary: #FFEEF3;--bg-card: #FFFFFF;--text-primary: #3D2B3D;--text-secondary: #8B6B8B;--text-muted: #BBA0BB;--accent-pink: #FF6BAF;--accent-purple: #A855F7;--accent-yellow: #FCD34D;--accent-blue: #60A5FA;--accent-green: #4ADE80;--border-light: #FFE0EF;--shadow-soft: 0 2px 16px rgba(200, 100, 160, .08);--shadow-card: 0 4px 24px rgba(200, 100, 160, .05);--radius-lg: 20px;--radius-md: 14px;--radius-sm: 8px}*{margin:0;padding:0;box-sizing:border-box}body{font-family:"M PLUS Rounded 1c",Hiragino Maru Gothic Pro,sans-serif;background:var(--bg-primary);color:var(--text-primary);min-height:100vh}#app{max-width:440px;margin:0 auto;padding:16px 16px 80px}.app-header{display:flex;justify-content:space-between;align-items:center;padding:10px 0}.app-title{font-size:1.2rem;font-weight:800;background:linear-gradient(135deg,var(--accent-pink),var(--accent-purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.header-actions{display:flex;gap:6px}.icon-btn{width:36px;height:36px;border-radius:50%;border:none;background:var(--bg-card);cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-soft);transition:transform .15s,box-shadow .15s}.icon-btn:hover{transform:scale(1.1);box-shadow:0 3px 12px #c864a026}.icon-btn.danger:hover{background:#ffe0e0}.char-section{background:var(--bg-card);border-radius:var(--radius-lg);padding:20px;margin:12px 0;box-shadow:var(--shadow-card);text-align:center}.char-display{position:relative;display:flex;justify-content:center;align-items:flex-end;min-height:160px;margin-bottom:12px}#char-canvas{image-rendering:pixelated;image-rendering:crisp-edges;width:160px;height:160px}#npc-canvas{position:absolute;right:10px;bottom:10px;image-rendering:pixelated;image-rendering:crisp-edges;width:64px;height:64px;opacity:.7}.monster-bounce canvas{animation:monsterBounce 2s ease-in-out infinite}.monster-sway canvas{animation:monsterSway 3s ease-in-out infinite}@keyframes monsterBounce{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}@keyframes monsterSway{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-4px) rotate(3deg)}}.char-info{margin-top:8px}.char-name-row{display:flex;justify-content:center;align-items:baseline;gap:8px}.char-name{font-size:1.3rem;font-weight:800}.char-level{font-size:.85rem;color:var(--accent-purple);font-weight:700}.char-stage{font-size:.8rem;color:var(--text-secondary);margin-top:2px}.char-dex{font-size:.65rem;color:var(--accent-purple);font-weight:700;margin-top:2px;font-family:monospace}.char-branch{font-size:.75rem;color:var(--text-muted);margin-top:2px}.exp-bar{height:8px;background:var(--bg-secondary);border-radius:4px;margin:8px 20px 0;overflow:hidden}.exp-bar-fill{height:100%;border-radius:4px;background:linear-gradient(90deg,var(--accent-pink),var(--accent-purple));transition:width .4s ease}.exp-text{font-size:.72rem;color:var(--text-muted);margin-top:4px}.api-status{font-size:.7rem;margin-top:8px;padding:4px 10px;border-radius:12px;display:inline-block}.api-status.connected{background:#e8ffe0;color:#2d8c1f}.api-status.disconnected{background:#f5f0f5;color:var(--text-muted)}.personality-section{background:var(--bg-card);border-radius:var(--radius-lg);padding:16px 20px;margin:12px 0;box-shadow:var(--shadow-card)}.section-title{font-size:.85rem;color:var(--text-secondary);margin-bottom:8px}.personality-summary{font-size:.78rem;color:var(--text-muted);margin-bottom:10px}.trait-bar{display:flex;align-items:center;gap:6px;margin:4px 0}.trait-label{font-size:.68rem;width:120px;color:var(--text-secondary);white-space:nowrap}.trait-meter{flex:1;height:6px;background:var(--bg-secondary);border-radius:3px;overflow:hidden}.trait-fill{height:100%;border-radius:3px;transition:width .4s ease}.trait-value{font-size:.65rem;width:20px;text-align:right;color:var(--text-muted)}.todo-section{background:var(--bg-card);border-radius:var(--radius-lg);padding:16px;margin:12px 0;box-shadow:var(--shadow-card)}.date-tabs{display:flex;gap:6px;margin-bottom:10px}.date-tab{flex:1;padding:6px 0;border:2px solid var(--border-light);border-radius:var(--radius-sm);background:transparent;font-size:.78rem;font-family:inherit;font-weight:700;color:var(--text-muted);cursor:pointer;transition:all .2s}.date-tab.active{background:linear-gradient(135deg,var(--accent-pink),var(--accent-purple));color:#fff;border-color:transparent}.todo-form{display:flex;gap:8px;margin-bottom:8px}.todo-form input{flex:1;padding:10px 14px;border:2px solid var(--border-light);border-radius:var(--radius-md);font-size:.85rem;font-family:inherit;background:var(--bg-secondary);outline:none;transition:border-color .2s}.todo-form input:focus{border-color:var(--accent-pink)}.todo-submit-btn{width:44px;height:44px;border:none;border-radius:var(--radius-md);cursor:pointer;font-size:1.2rem;font-weight:800;background:linear-gradient(135deg,var(--accent-pink),var(--accent-purple));color:#fff;transition:transform .15s}.todo-submit-btn:active{transform:scale(.92)}.todo-count{font-size:.7rem;color:var(--text-muted);margin-bottom:8px}.todo-list{display:flex;flex-direction:column;gap:6px}.todo-item{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--bg-secondary);border-radius:var(--radius-sm);transition:all .3s}.todo-item.completed{opacity:.5;text-decoration:line-through}.todo-item.completing{animation:slideOut .4s ease forwards}.todo-content{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.todo-category{font-size:.85rem;flex-shrink:0}.todo-text{font-size:.82rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.recurring-mark{font-size:.7rem;margin-left:4px}.todo-actions{display:flex;gap:4px;flex-shrink:0}.todo-complete-btn,.todo-delete-btn{width:30px;height:30px;border:none;border-radius:50%;font-size:.8rem;cursor:pointer;transition:transform .15s,background .15s}.todo-complete-btn{background:var(--accent-green);color:#fff;font-weight:700}.todo-complete-btn:hover{transform:scale(1.15)}.todo-delete-btn{background:transparent;color:var(--text-muted)}.todo-delete-btn:hover{background:#ffe0e0;color:#e55}.todo-empty,.chat-empty{text-align:center;padding:20px;color:var(--text-muted);font-size:.8rem}.todo-separator{font-size:.72rem;color:var(--text-muted);padding:6px 0;cursor:pointer;text-align:center;-webkit-user-select:none;user-select:none}.todo-separator.collapsed:after{content:" â–¸"}.completed-list.collapsed{display:none}@keyframes slideOut{to{transform:translate(40px);opacity:0;max-height:0;padding:0;margin:0}}.particle{position:fixed;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:9999;animation:particleFly .55s ease-out forwards}@keyframes particleFly{to{transform:translate(var(--dx),var(--dy)) scale(0);opacity:0}}.chat-section{background:var(--bg-card);border-radius:var(--radius-lg);padding:16px;margin:12px 0;box-shadow:var(--shadow-card)}.chat-log{display:flex;flex-direction:column;gap:8px;margin-bottom:10px;max-height:360px;overflow-y:auto}.chat-bubble{padding:8px 12px;border-radius:14px;max-width:85%;font-size:.82rem;line-height:1.4;word-break:break-word}.chat-player{background:linear-gradient(135deg,#ffe0ef,#ffd0e4);align-self:flex-end;border-bottom-right-radius:4px}.chat-npc{background:var(--bg-secondary);align-self:flex-start;border-bottom-left-radius:4px}.chat-speaker{display:block;font-size:.65rem;font-weight:700;color:var(--text-muted);margin-bottom:2px}.chat-message{display:block}.chat-entering{opacity:0;transform:scale(.8)}.chat-pop-in{animation:chatPop .3s cubic-bezier(.34,1.56,.64,1) forwards}@keyframes chatPop{0%{opacity:0;transform:scale(.8) translateY(8px)}to{opacity:1;transform:scale(1) translateY(0)}}.chat-toggle-btn{display:block;width:100%;padding:6px;border:none;background:transparent;color:var(--text-muted);font-size:.72rem;font-family:inherit;cursor:pointer;transition:color .2s}.chat-toggle-btn:hover{color:var(--accent-pink)}.chat-trigger-btn{width:100%;padding:10px;border:2px dashed var(--border-light);border-radius:var(--radius-md);background:transparent;color:var(--accent-pink);font-family:inherit;font-size:.82rem;font-weight:700;cursor:pointer;transition:all .2s}.chat-trigger-btn:hover{background:var(--bg-secondary);border-color:var(--accent-pink)}.chat-trigger-btn:disabled{opacity:.5;cursor:not-allowed}.friend-section{background:var(--bg-card);border-radius:var(--radius-lg);padding:16px;margin:12px 0;box-shadow:var(--shadow-card)}.friend-actions{display:flex;gap:8px;margin-bottom:10px}.friend-btn{flex:1;padding:8px;border:2px solid var(--border-light);border-radius:var(--radius-sm);background:transparent;font-size:.72rem;font-family:inherit;font-weight:700;color:var(--text-secondary);cursor:pointer;transition:all .2s}.friend-btn:hover{border-color:var(--accent-pink);color:var(--accent-pink)}.friend-list{display:flex;flex-direction:column;gap:4px}.friend-item{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;background:var(--bg-secondary);border-radius:var(--radius-sm);font-size:.78rem}.friend-info{display:flex;gap:6px;align-items:baseline}.friend-level{font-size:.65rem;color:var(--accent-purple)}.friend-remove-btn{width:22px;height:22px;border:none;border-radius:50%;background:transparent;color:var(--text-muted);font-size:.7rem;cursor:pointer;transition:all .15s}.friend-remove-btn:hover{background:#ffe0e0;color:#e55}.friend-empty{color:var(--text-muted);font-size:.72rem;text-align:center;padding:10px}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#0000004d;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);z-index:100;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s}.modal-overlay.show{opacity:1;pointer-events:auto}.modal-card{background:var(--bg-card);border-radius:var(--radius-lg);padding:24px;max-width:90vw;width:360px;box-shadow:0 12px 40px #00000026}.modal-card h3{font-size:1rem;margin-bottom:8px}.modal-desc{font-size:.78rem;color:var(--text-secondary);margin-bottom:12px}.modal-input{width:100%;padding:10px;border:2px solid var(--border-light);border-radius:var(--radius-sm);font-size:.85rem;font-family:inherit;outline:none;background:var(--bg-secondary);margin-bottom:12px}.modal-input:focus{border-color:var(--accent-pink)}.modal-textarea{min-height:80px;resize:vertical}.modal-btns{display:flex;gap:8px;justify-content:flex-end}.modal-btn{padding:8px 20px;border:none;border-radius:var(--radius-sm);font-family:inherit;font-weight:700;cursor:pointer;font-size:.82rem;transition:transform .15s}.modal-btn.cancel{background:var(--bg-secondary);color:var(--text-secondary)}.modal-btn.save{background:linear-gradient(135deg,var(--accent-pink),var(--accent-purple));color:#fff}.modal-btn:active{transform:scale(.95)}.modal-card-large{width:400px;max-height:80vh;display:flex;flex-direction:column}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.modal-close-btn{width:30px;height:30px;border:none;border-radius:50%;background:var(--bg-secondary);cursor:pointer;font-size:.85rem;color:var(--text-muted);transition:all .15s}.modal-close-btn:hover{background:#ffe0e0;color:#e55}.history-body{overflow-y:auto;flex:1}.history-empty{text-align:center;padding:30px;color:var(--text-muted);font-size:.8rem}.history-group{margin-bottom:16px}.history-date{display:flex;align-items:center;gap:8px;padding-bottom:6px;border-bottom:1px solid var(--border-light);margin-bottom:6px}.history-date-label{font-weight:700;font-size:.85rem}.history-date-str{font-size:.65rem;color:var(--text-muted)}.history-badges{display:flex;gap:4px;margin-left:auto}.history-badge{font-size:.65rem;padding:1px 6px;background:var(--bg-secondary);border-radius:10px}.history-task{font-size:.78rem;padding:4px 8px;color:var(--text-secondary);line-height:1.5}.evolution-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle,#fffffff2,#c864e633);z-index:200;display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:0;pointer-events:none;transition:opacity .5s}.evolution-overlay.show{opacity:1;pointer-events:auto}#evolution-canvas{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;pointer-events:none}.evolution-name{font-size:1.8rem;font-weight:800;background:linear-gradient(135deg,var(--accent-pink),var(--accent-purple),var(--accent-yellow));-webkit-background-clip:text;-webkit-text-fill-color:transparent;opacity:0;transform:scale(.5);transition:opacity .5s,transform .5s cubic-bezier(.34,1.56,.64,1)}.evolution-name.show{opacity:1;transform:scale(1)}
